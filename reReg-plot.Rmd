---
output: latex_fragment
---

```{R, echo = FALSE, message = FALSE}
library(reda); library(reReg)
data(readmission, package = "frailtypack")
```

An easy way to glance at recurrent event data is by event plots,
which can be created by applying the generic function `plot()` to the `Recur` object
when the \pkg{reReg} package is loaded. 
Additionally, the `plotEvents()` function from the \pkg{reReg} package allows users to 
stratify the event plots by discrete variables.
The following codes produces event plots with and without
stratifying  by whether the patients received chemotherapy.
    
```{R, ep, echo = FALSE, fig.path = 'images/', fig.show = 'hide', fig.width = 14, fig.height = 12}
df0 <- subset(readmission, !(id %in% c(60, 109, 280)))
obj <- with(df0, Recur(t.stop, id, event, death))
plot(obj, legend = "bottom")
fn <- Recur(t.stop, id, event, death) ~ chemo
plotEvents(fn, data = df0, legend = "bottom")
```
```{R, eval = FALSE}
df0 <- subset(readmission, !(id %in% c(60, 109, 280)))
obj <- with(df0, Recur(t.stop, id, event, death))
plot(obj, legend = "bottom") ## Fig. 1
fn <- Recur(t.stop, id, event, death) ~ chemo
plotEvents(fn, data = df0, legend = "bottom") ## Fig. 2
```
\vspace*{-.3cm}	
\begin{figure}[H]
    \centering
    \begin{minipage}{0.245\textwidth}
        \centering
        \includegraphics[scale = .125]{images/ep-1}
        \caption{No stratification}
    \end{minipage}\hfill
    \begin{minipage}{0.245\textwidth}
        \centering
        \includegraphics[scale = .125]{images/ep-2}
        \caption{Stratified by `chemo`.}
    \end{minipage}
\end{figure}
	